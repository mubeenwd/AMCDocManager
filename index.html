<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <title>nativeDroid - Theme for jQuery Mobile</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- FontRobot -->
    <link rel="stylesheet" href="assets/css/roboto/font-roboto.css" />
    <!-- FontAwesome - http://fortawesome.github.io/Font-Awesome/ -->
    <link rel="stylesheet" href="assets/css/font-awesome.min.css" />
    <!-- jQueryMobileCSS - original without styling -->
    <link rel="stylesheet" href="assets/css/jquerymobile.css" />
    <!-- nativeDroid core CSS -->
    <link rel="stylesheet" href="assets/css/jquerymobile.nativedroid.css" />
    <!-- nativeDroid: Light/Dark -->
    <link rel="stylesheet" href="assets/css/jquerymobile.nativedroid.dark.css" id='jQMnDTheme' />
    <!-- nativeDroid: Color Schemes -->
    <link rel="stylesheet" href="assets/css/jquerymobile.nativedroid.color.green.css"
        id='jQMnDColor' />
    <!-- jQuery / jQueryMobile Scripts -->
    <script src="assets/js/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="assets/js/jquery.mobile-1.3.1.min.js" type="text/javascript"></script>
    <script src="phonegap.js" type="text/javascript"></script>
</head>
<body>
    <div id='map-canvas'>
    </div>
    <div data-role="page" id="pgIndex" data-theme='b'>
        <div data-role="header" data-position="fixed" data-tap-toggle="false" data-theme='b'>
            <a href="index.html" data-ajax="false"><i class='icon-ellipsis-vertical'></i></a>
            <h1>
                AMC Doc Manager</h1>
        </div>
        <div data-role="content">
            <ul data-nativedroid-plugin='cards' id="addCards">
                
            </ul>

            <ul data-nativedroid-plugin='cards' id="showCards">
                
            </ul>
        </div>
    </div>
    
    <script type="text/javascript">
        var pictureSource;   // picture source
        var destinationType; // sets the format of returned value

        $(document).on("pagecreate", "#pgIndex", function (event) {
            addPlaceHolderImage();
        });

        function addPlaceHolderImage() {
            var len = $("#showCards li").length + 1;
            $("#addCards").append("<li data-cards-type='weather'><h1><input type=\"text\" value=\"Page " + len + "\"/></h1><center><img src=\"assets/img/add.png\" onclick=\"onAddImageClick();\"/></center></li>");

            $('#pgIndex').trigger('create');
        }

        function onAddImageClick() {
            capturePhoto();

            var len = $("#showCards li").length + 1;
            $("#addCards li").find("input").val("Page " + len);
        }

        function capturePhoto() {
            navigator.camera.getPicture(onPhotoUriSuccess, null, { sourceType: 1, quality: 50, destinationType: Camera.DestinationType.FILE_URI });
            return false;
        }

        function onPhotoUriSuccess(imageURI) {
            var addCardsText = $("#addCards li").find("input").val();
            $("#showCards").append("<li data-cards-type='weather'><h1>" + addCardsText + "</h1><center><img src=\"" + imageURI + "\" style=\"width: 100%;\" onclick=\"showImageFull(" + imageURI + "," + addCardsText + ");\" /></center></li>");
            $('#pgIndex').trigger('create');
        }

        function showImageFull(imageURI, addCardsText) {
            location = "show_doc.html?imgUri=" + imageURI + "&text=" + addCardsText;
        }
    </script>

    <script src="assets/js/nativedroid.script.js"></script>
</body>
</html>
